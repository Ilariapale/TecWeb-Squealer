<link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.3.1/mdb.min.css" rel="stylesheet" />

<div class="container">
  <div class="row justify-content-center">
    <div class="col-12 col-md-6">
      <div class="card text-center border border-primary shadow-0">
        <div class="bg-image hover-overlay ripple" data-mdb-ripple-color="light">
          <!-- <img src="../../assets/imgs/vulture-306727_960_720.webp" class="img-fluid" /> -->
          <a href="#!">
            <div class="mask" style="background-color: rgba(251, 251, 251, 0.15)"></div>
          </a>
        </div>
        <div class="card-header">HEX{{squeal.hex_id}}</div>
        <div class="card-body p-2">
          <h5 class="card-title">@{{squeal.username}}</h5>
          <p class="card-text">{{squeal.content}}</p>

          <div class="card-icons container">
            <div class="row flex-nowrap justify-content-between d-flex align-items-center">

              <div class="col-auto px-1">
                <button id="comment_button" type="button" class="btn btn-secondary btn-rounded"
                  (click)="toggleComments()">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path
                      d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
                    </path>
                  </svg>
                  <p class="badge bg-danger ms-2 my-auto">5</p>
                </button>
              </div>

              <div class="reactions col-auto px-1">
                <div type="button" class="btn btn-secondary btn-floating" style="height: 55px; width: 55px;">
                  <app-reactions-menu [squealId]="squeal._id ?? '0'"></app-reactions-menu>
                </div>
              </div>

              <div class="col-auto px-1">
                <button type="button" class="btn btn-secondary btn-rounded">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="white"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M4 1v22l8-8 8 8V1H4zm8 8V1"></path>
                  </svg>
                  <p class="badge bg-danger ms-2 my-auto">6</p>
                </button>
              </div>

            </div>
          </div>

          <div class="card-footer">CREATED AT</div>

          <div *ngIf="showComments" class="mt-3">
            <h4>Commenti</h4>
            <button (click)="loadMoreComments()">Carica altri commenti</button>
            <!-- Lista dei commenti -->
            <ul class="list-unstyled">
              <li *ngFor="let comment of comment_section.comments_array">
                <p><strong>{{comment.author_username}}</strong>: {{comment.text}}</p>
              </li>
            </ul>

            <!-- Modulo per aggiungere un nuovo commento -->
            <div class="mt-3">
              <input [(ngModel)]="newCommentText" placeholder="Inserisci il tuo commento..." class="form-control">
              <button (click)="addComment()" class="btn btn-primary mt-2">Aggiungi Commento</button>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>
<hr>